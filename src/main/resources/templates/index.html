<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>RAG App</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="container">
    <h1>RAG App</h1>

    <!-- File Upload Section -->
    <div class="upload-section">
        <h2>Upload File</h2>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" name="file" required>
            <button type="submit">Upload</button>
        </form>
    </div>

    <!-- Chat Section -->
    <div class="chat-section">
        <h2>Chat</h2>
        <form id="chatForm">
            <input type="text" id="message" name="message" placeholder="Ask something..." required>
            <button type="submit">Send</button>
        </form>
        <div id="chatHistory">
            <!-- Chat responses will appear here -->
        </div>
    </div>
</div>

<script>
    // JavaScript to handle chat submission
    document.getElementById('chatForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const message = document.getElementById('message').value;

        const response = await fetch('/response', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message }),
        });
        const result = await response.text();

        const chatHistory = document.getElementById('chatHistory');
        chatHistory.innerHTML += `<div><strong>You:</strong> ${message}</div>`;
        chatHistory.innerHTML += `<div><strong>Bot:</strong> ${result}</div>`;
        document.getElementById('message').value = '';
    });
</script>
</body>
</html>
